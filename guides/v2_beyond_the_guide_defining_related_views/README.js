Ext.data.JsonP.v2_beyond_the_guide_defining_related_views({"guide":"<h1>Defining Related Views</h1>\n<div class='toc'>\n<p><strong>Contents</strong></p>\n<ol>\n<li><a href='#!/guide/v2_beyond_the_guide_defining_related_views-section-1'>Prep</a></li>\n<li><a href='#!/guide/v2_beyond_the_guide_defining_related_views-section-2'>Duplicating an Existing List</a></li>\n<li><a href='#!/guide/v2_beyond_the_guide_defining_related_views-section-3'>Related View Action</a></li>\n</ol>\n</div>\n\n<p>Related Views are List Views that we want to duplicate for purposes of looking up or for specific filters. For example I may adding a new \"Employee\" and need to assign them to a \"Company\". When selecting a company it should show a list with logic to handle making a selection and passing the value back to my new employee. We don't want that extra logic to still be there when looking at the \"main\" employee listing.</p>\n\n<h2 id='v2_beyond_the_guide_defining_related_views-section-1'>Prep</h2>\n\n<p>Since we need a base list view in order to create a related one make a new List view (see Create a List in <a href=\"#!/guide/v2_template_guide\">Argos-Template Guide</a> for help) with the following properties into <code>argos-template/src/Views/Contact/List.js</code>:</p>\n\n<pre><code>    //Template\n    itemTemplate: new Simplate([\n        '&lt;h3&gt;{%: $.NameLF %}&lt;/h3&gt;',\n        '&lt;h4&gt;{%: $.AccountName %}&lt;/h4&gt;'\n    ]),\n\n    //Localization\n    titleText: 'Contacts',\n\n    detailView: 'contact_detail',\n    icon: 'content/images/icons/Contacts_24x24.png',\n    id: 'contact_list',\n    insertView: 'contact_edit',\n    queryOrderBy: 'LastNameUpper,FirstName',\n    querySelect: [\n        'AccountName',\n        'Account/AccountName',\n        'NameLF'\n    ],\n    resourceKind: 'contacts',\n    formatSearchQuery: function(searchQuery) {\n        return string.substitute('(LastNameUpper like \"${0}%\" or upper(FirstName) like \"${0}%\")', [this.escapeSearchQuery(searchQuery.toUpperCase())]);\n    }\n</code></pre>\n\n<h2 id='v2_beyond_the_guide_defining_related_views-section-2'>Duplicating an Existing List</h2>\n\n<p>Now that we have a List view we need to duplicate it for the related part.</p>\n\n<p>1. Open <code>src/ApplicationModule.js</code></p>\n\n<p>2. Find where the list is being registered: <code>this.registerView(new ContactList());</code></p>\n\n<p>3. Copy that line and paste it below but for the constructor add an object with a key of <code>id</code> set to <code>'contact_related'</code>.</p>\n\n<pre><code>this.registerView(new ContactList());\nthis.registerView(new ContactList({\n    id: 'contact_related'\n}));\n</code></pre>\n\n<p>4. For views, anything you pass into the constructor will be mixed in (overwriting the default), as <code>id</code> must be unique we pass in a new one.</p>\n\n<p>5. Done! Now when the app is started you will have a duplicate instance of the ContactList ready for it's own separate use that doesn't interfere with the original.</p>\n\n<h2 id='v2_beyond_the_guide_defining_related_views-section-3'>Related View Action</h2>\n\n<p>As an example we will use the Account Detail view to define a related action that utilizes our newly duplicated related list view.</p>\n\n<p>1. Open <code>src/Views/Account/Detail.js</code></p>\n\n<p>2. Go down to <code>createLayout</code> and add a new section with the following:</p>\n\n<pre><code>{\n    title: this.relatedItemsText,\n    list: true,\n    name: 'RelatedItemsSection',\n    children: [{\n        name: 'AccountRelated',\n        icon: 'content/images/icons/contact_24x24.png',\n        label: this.relatedContactsText,\n        where: this.formatRelatedQuery.bindDelegate(this, 'AccountId eq \"${0}\"'),\n        view: 'contact_related'\n    }]\n}\n</code></pre>\n\n<p>3. The key points that make this a related action is:</p>\n\n<ul>\n<li><p> <code>list: true</code>, this tells the rendering engine to use <code>&lt;ul&gt;</code> as a container instead of a normal <code>&lt;div&gt;</code>.</p></li>\n<li><p> <code>view: id</code>, this tells the rendering engine that it should use the related view template that is setup to wire the navigation action, extract the where clause (and options if defined) and pass that along to the view.</p></li>\n<li><p> <code>where: expression</code>, the expression will be passed to the new view and used in conjunction with its <code>queryWhere</code> expression (if defined). Here we are using the base Detail views built-in function <code>formatRelatedQuery</code> which takes a <code>string.substitute</code> format string where <code>${0}</code> will be the <code>$key</code> property (you may also pass a property name to extract) of the Detail entry. You can put a string directly here or a function that gets passed the entry.</p></li>\n</ul>\n\n\n<p>4. Add the localization strings.</p>\n\n<pre><code>   relatedItemsText: 'Related',\n   relatedContactsText: 'Contacts',\n</code></pre>\n\n<p>5. Save and reload.</p>\n","title":"Related Views"});