<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="/stylesheets/shCore.css"/>
    <link rel="stylesheet" type="text/css" href="/stylesheets/shThemeDefault.css"/>

    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print"/>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Argos Mobile by Sage</title>
</head>

<body>
<div id="container">
    <div class="inner">

<header class="clearfix">
    <div class="grid-2">
        <h1>Argos Template Guide</h1>

        <h2>Kickstart your app</h2>
    </div>
    <div class="grid-2">
        <section class="downloads clearfix">
            <a href="https://github.com/Sage/argos-template/zipball/master" class="download-zip button"><span>Download .zip</span></a>
            <a href="https://github.com/Sage/argos-template" class="view-on-github button"><span>View on GitHub</span></a>
        </section>
    </div>
</header>

<section id="main_content" role="main">
    <p>Argos-SDK uses Dojo's AMD loader system for defining modules, declaring "classes" and loading said modules.</p>

<p>AMD stands for Asynchronous Module Definition which means that you define all your parts into separate files and when your page loads it loads asynchronously only the modules it needs to display that page.</p>

<p>Concretely you get:
Automatic dependent components being loaded first, no more "Oh, you to include this script before that script..."
Faster loading as the loader runs asynch and handles all the tricky queuing and waiting
Away from giant objects like <code>dojo</code> or <code>$</code> that contain a myriad of functions
Easier to locate usage, with explicit dependencies you can quickly call up what modules use</p>

<h3>Define</h3>

<p>All modules will be wrapped in a <code>define()</code> statement. For the purposes of argos-template it will always use the following skeleton:</p>

<pre class="brush: js">
define( /*Path To File*/ ,
['Array of dependencies to require'], function(
/*the returned object of each dependency*/
) {
return {}; // the object that this module defines, to then be required in other modules
});
</pre>


<p>An example:</p>

<pre class="brush: js">
define('Sage/Platform/Mobile/Format', [
    'dojo/_base/lang',
    'dojo/string'
], function(
    lang,
    string,
) {
    return lang.setObject('Sage.Platform.Mobile.Format', { ... });
});
</pre>


<p>At first glance the paths don't quite look like paths, you can setup shortcuts to your folder structure in your <code>index-dev.html</code> file to point to libraries or setup a namespace etc.</p>

<p>Breaking this down, this file should will be loaded from: <code>../../argos-sdk/src/Format.js'.
It see's that it requires the two files: 'lang.js' and 'string.js' from the dojo library so it goes and loads those, and their dependencies (and so on), once</code>lang<code>and</code>string<code>are loaded and initialized then our</code>Format` module is started and is passed in the result of those two files into the function.</p>

<p>Now we are within the <code>{ }</code> which can be considered "private". Things defined here are only ran once during the loading process and if the return object does not expose them they are no longer accessible.</p>

<p>In this case we are returning a global object with some various properties. So if another module adds this <code>Format</code> module as a dependency the object that is passed to their function will be the object <code>Sage.Platform.Mobile.Format</code>.</p>

<p>It is important to note that the loader only initializes each module once and it passes the references to any module that needs it.</p>

<h3>Declare</h3>

<p>The example above used <code>lang.setObject()</code> to set a global object, however, in most cases you will use <code>declare</code> which sets up a factory-like class where you would use the <code>new</code> keyword to create instances of.</p>

<p>Meaning if you have this:</p>

<pre class="brush: js">
define('Mobile/Template/Views/Account/List', [
    'dojo/_base/declare',
    'dojo/string',
    'Sage/Platform/Mobile/List'
], function(
    declare,
    string,
    List
) {
    return declare('Mobile.Template.Views.Account.List', [List], {
        // Localization
        titleText: 'Accounts',

        //Templates
        itemTemplate: new Simplate([
            '<h3>{%= $.AccountName %}</h3>'
        ]),

        //View Properties
        id: 'account_list',
        detailView: 'account_detail',
        insertView: 'account_edit',
        querySelect: [
            'AccountName'
        ],
        resourceKind: 'accounts',

        formatSearchQuery: function(searchQuery) {
            return string.substitute('AccountName like "%${0}%"', [
                this.escapeSearchQuery(searchQuery.toUpperCase())
            ]);
        }
    });
});
</pre>


<p>Then when you require (as a dependency) in another module you need to use <code>new</code>, or refer to the <code>prototype</code>:</p>

<pre class="brush: js">
define('Mobile/Template/ApplicationModule', [
    Mobile/Template/Views/Account/List
], function(AccountList) {

var viewInstance = new AccountList();
var accountListTitle = AccountList.prototype.titleText;

});
</pre>




</section>

<footer>
    Argos Mobile is maintained by <a href="https://github.com/Sage">Sage</a><br>
</footer>
</div>
</div>

<!-- Scripts -->
<script src="/javascripts/shCore.js"></script>
<script src="/javascripts/shBrushJScript.js"></script>
<script src="/javascripts/shBrushCss.js"></script>
<script src="/javascripts/shBrushXml.js"></script>
<script src="/javascripts/shBrushCSharp.js"></script>
<script src="/javascripts/shBrushRuby.js"></script>

<script>
    SyntaxHighlighter.all();
</script>
</body>
</html>