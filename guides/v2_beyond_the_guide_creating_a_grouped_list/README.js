Ext.data.JsonP.v2_beyond_the_guide_creating_a_grouped_list({"guide":"<h1>Creating a Grouped List</h1>\n\n<p>A common extension of List Views is a Grouped List which is used to logically categorize the list items into sections.</p>\n\n<h2>Contact List</h2>\n\n<p>To demonstrate we will make a new List view for the Contact entity but it will be based off GroupedList instead of List. When the items are added to the page they will be alphabetized and separated by the first letter of the last names -- just like a phone book.</p>\n\n<p>If you have completed <a href=\"#!/guide/v2_beyond_the_guide_list_search\">How List Search Works</a> then you already have the file defined, just follow along and add the new properties.</p>\n\n<p>1. Create a new folder in <code>argos-template/src/Views</code> named Contact. Within that folder create a file named <code>List.js</code> and open it up.</p>\n\n<p>2. Add the following code and note we are now pulling in, referencing and mixing in <code>GroupedList</code> instead of <code>List</code>:</p>\n\n<pre><code>define('Mobile/SalesLogix/Views/Contact/List', [\n    'dojo/_base/declare',\n    'dojo/string',\n    'Sage/Platform/Mobile/GroupedList'\n], function(\n    declare,\n    string,\n    action,\n    GroupedList\n) {\n\n    return declare('Mobile.SalesLogix.Views.Contact.List', [GroupedList], {\n        titleText: 'Contacts',\n\n        id: 'contact_list',\n        icon: 'content/images/icons/login_24.png',\n        resourceKind: 'contacts'\n    });\n});\n</code></pre>\n\n<p>3. For querySelect get: <code>NameLF</code> and <code>AccountName</code>, order by <code>'LastNameUpper, FirstName'</code> and for the itemTemplate use <code>NameLF</code> in a <code>&lt;h3&gt;</code> and <code>AccountName</code> in a <code>&lt;h4&gt;</code>:</p>\n\n<pre><code>    return declare('Mobile.SalesLogix.Views.Contact.List', [GroupedList], {\n        titleText: 'Contacts',\n\n        itemTemplate: new Simplate([\n            '&lt;h3&gt;{%: $.NameLF %}&lt;/h3&gt;',\n            '&lt;h4&gt;{%: $.AccountName %}&lt;/h4&gt;'\n        ]),\n\n        id: 'contact_list',\n        icon: 'content/images/icons/login_24.png',\n        queryOrderBy: 'LastNameUpper,FirstName',\n        querySelect: [\n            'NameLF',\n            'AccountName'\n        ],\n        resourceKind: 'contacts',\n</code></pre>\n\n<p>4. Now add the <code>formatSearchQuery()</code> function that formats to <code>like LastNameUpper or like upper(FirstName)</code>:</p>\n\n<pre><code>        formatSearchQuery: function(searchQuery) {\n            return string.substitute('(LastNameUpper like \"${0}%\" or upper(FirstName) like \"${0}%\")', [this.escapeSearchQuery(searchQuery.toUpperCase())]);\n        }\n</code></pre>\n\n<p>5. Save, register and add it to the home view. You now see a fully functioning List view for contacts - but not grouped. We need to add the Grouped List logic.</p>\n\n<p>6. GroupedLists have a function named <a href=\"#!/api/Sage.Platform.Mobile.GroupedList-method-getGroupForEntry\" rel=\"Sage.Platform.Mobile.GroupedList-method-getGroupForEntry\" class=\"docClass\">getGroupForEntry()</a> and it is passed each list item and it should return an object with two keys: <code>tag</code> and <code>title</code>. Each entry will be grouped with other entries that have the same <code>tag</code> and will be added to the List view under a collapsible header using the <code>title</code> as the header text.</p>\n\n<p>7. Add the <code>getGroupForEntry</code> function that takes the first letter of <code>NameLF</code> and uses it for both title and tag:</p>\n\n<pre><code>        getGroupForEntry: function(entry) {\n            var firstChar = entry['NameLF'].substring(0,1).toUpperCase();\n            return {\n                tag: firstChar,\n                title: firstChar\n            };\n        },\n</code></pre>\n\n<p>8. Save, run your app and browse to the Contacts List. You should now see results grouped by letter and you can collapse/expand each section.</p>\n","title":"Grouped List"});